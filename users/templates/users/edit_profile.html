{% extends "base.html" %}
{% load static %}
{% block content %}
{% if form.errors %}
    <div class="alert alert-danger">
        <ul>
            {% for field, errors in form.errors.items %}
                {% for error in errors %}
                    <li><strong>{{ field|title }}</strong>: {{ error }}</li>
                {% endfor %}
            {% endfor %}
        </ul>
    </div>
{% endif %}


<section class="section section-lg bg-color-7">
    <div class="container">
        <div class="row row-30 flex-column-reverse flex-lg-row">
            <div class="col-lg-8">
                <article class="post-info inset-1">
                    <h4 class="post-info-title">Edit Your Profile</h4>
                    <!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec posuere metus et tortor pulvinar venenatis. Aliquam erat volutpat. Nam ultrices semper felis, at laoreet metus</p> -->

                        <form method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                        
                    
                        <table class="post-info-table">

                        <tr>
                            <td>Bio</td>
                            <td><textarea class="form-input form-control-has-validation" id="id_bio" name="bio" data-constraints="@Required"></textarea>
                            </td>
                        </tr>
                        <tr>
                            <td>Website</td>
                            <td><input class="form-input form-control-has-validation" id="id_website" type="url" name="website">
                            </td>
                    
                                <!-- <td>Ð¡ountry</td>
                            <td>USA</td> -->
                        </tr>
                        
                        <tr>
                            <td>File</td>
                            <td>
                                
                                <div class="profile-picture-upload">
                                    <label for="id_profile_picture" class="upload-label">Profile Picture</label>
                                    
                                    <!-- Display current image -->
                                    <!-- <div class="current-image">
                                        <p>Currently: <a href="/media/default.png" target="_blank">default.jpg</a></p>
                                        <img src="/media/default.png" alt="Current Profile Picture">
                                    </div> -->
                                
                                    <!-- Clear checkbox -->
                                    <div class="clear-option">
                                        <input type="checkbox" name="profile_picture-clear" id="profile_picture-clear_id">
                                        <label for="profile_picture-clear_id">Remove current picture</label>
                                    </div>
                                
                                    <!-- File input -->
                                    <div class="file-upload">
                                        <label for="id_profile_picture" class="file-label">Change Profile Picture</label>
                                        <input type="file" name="profile_picture" accept="image/*" id="id_profile_picture">
                                    </div>
                                </div>
                            
                            </td>
                        </tr>
                    </table>
                    <button class="button button-lg button-primary" type="submit" >Upload</button>
                </form>
                    
                </article>
            </div>
            <div class="col-lg-4 text-center text-lg-left">
                {% if request.user.profile.profile_picture %}
                <div class="movie-page-imageg"><img src="{{request.user.profile.profile_picture.url}}" alt="" width="375" height="491" />
                {% else %}
                <div class="movie-page-imageg"><img src="/media/default.png" alt="" width="375" height="491" />
                {%endif%}
                </div>
            </div>
        </div>
    </div>
</section>


<!-- <div style="margin: 100px;"></div>
    <h2>Edit Profile</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Save Changes</button>
    </form>
    <a href="{% url 'profile' %}">Back to Profile</a> -->
{% endblock %}
